{% load static %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'lists.css' %}">
{% endblock styles %}

<div class="header">
    <h1>{{page_title}} "{{search_query}}"...</h1>
    <p>Everything. Organized. Always</p>
</div>
<div class="container content-grid">
    {% for list in lists %}
        <div id="list-{{list.id}}" class="card animate__animated animate__fadeInUp">
            <div class="card-header">
                <h2>{{list.title}}</h2>
                <button class="toggle-dropdown" data-list-id="{{list.id}}">
                    <i data-lucide="ellipsis-vertical"></i>
                </button>
            </div>
            {% if list.description %}
                <p class="description">{{list.description}}</p>
            {% endif %}
            <div class="body {% if list.ordered %}ordered{% endif %}">
                {% for listitem in list.listitem_set.all %}
                    <p class="listitem">
                        {% if listitem.order%}<span>{{listitem.order}}</span>{% endif %}{{listitem}}
                    </p>
                {% endfor %}
            </div>
            <div class="menu" id="menu-{{list.id}}">
                <div class="card-header menu-header">
                    <h4>Options</h4>
                    <button class="toggle-dropdown" data-list-id="{{list.id}}">
                        <i data-lucide="x"></i>
                    </button>
                </div>
                <ul>
                    <li>
                        <a href="{% url 'lobby' %}">
                            <i data-lucide="list-end"></i>
                            Modify List
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'lists' %}">
                            <i data-lucide="square-stack"></i>
                            Duplicate List
                        </a>
                    </li>
                    <li>
                        <a href="">
                            <i data-lucide="trash"></i>
                            Delete List
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    {% endfor %}
</div>
<div class="page-controls">
    <a href="{% url 'search' %}?page={{previous_page}}&search_query={{search_query}}" class="{% if not page_num > 1 %}disabled{% endif %}">
        <i data-lucide="chevron-left"></i>
    </a>
    <a href="{% url 'search' %}?page={{next_page}}&search_query={{search_query}}" class="{% if not has_more %}disabled{% endif %}">
        <i data-lucide="chevron-right"></i>
    </a>
</div>