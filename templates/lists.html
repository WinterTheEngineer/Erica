{% load static %}

{% block styles %}
    <link rel="stylesheet" href="{% static 'lists.css' %}">
{% endblock styles %}

{% block body %}
<section id="lists" class="main-content">
    <div class="header">
        <h1>Your {{ sector }}</h1>
        <p>Everything. Organized. Always</p>
    </div>
    <div class="container content-grid">
        {% for list in lists %}
            <div id="list-{{list.id}}" class="card animate__animated animate__fadeInUp">
                <div class="card-header">
                    <h2>{{list.title}}</h2>
                    <button class="toggle-dropdown" data-list-id="{{list.id}}">
                        <i data-lucide="ellipsis-vertical"></i>
                    </button>
                </div>
                {% if list.description %}
                    <p class="description">{{list.description}}</p>
                {% endif %}
                <div class="body {% if list.ordered %}ordered{% endif %}">
                    {% for listitem in list.listitem_set.all %}
                        <p class="listitem">
                            {% if listitem.order%}<span>{{listitem.order}}</span>{% endif %}{{listitem}}
                        </p>
                    {% endfor %}
                </div>
                <div class="menu" id="menu-{{list.id}}">
                    <div class="card-header menu-header">
                        <h4>Options</h4>
                        <button class="toggle-dropdown" data-list-id="{{list.id}}">
                            <i data-lucide="x"></i>
                        </button>
                    </div>
                    <ul>
                        <li>
                            <a href="{% url 'lobby' %}">
                                <i data-lucide="list-end"></i>
                                Modify List
                            </a>
                        </li>
                        <li>
                            <a href="{% url 'lists' %}">
                                <i data-lucide="square-stack"></i>
                                Duplicate List
                            </a>
                        </li>
                        <li>
                            <a href="">
                                <i data-lucide="trash"></i>
                                Delete List
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        {% endfor %}
        <div class="card new-list-card list animate__animated animate__fadeInUp">
            <button class="toggle-list-modal">
                <ion-icon name="add-circle-outline"></ion-icon>
            </button>
        </div>
    </div>
</section>
<section id="list-creation-modal" class="list-creation-modal minimized">
    <div class="header">
        <button class="toggle-list-modal">
            <ion-icon name="close-circle"></ion-icon>
        </button>
        <img src="https://imgur.com/1zvy9gA.png" alt="Erica logo, depicting a pair of spectacles, and text that spells 'ERICA' in all caps.">
        <h2>Create a new list</h2>
    </div>
    <form action="{% url 'new_list' %}" method="post">
        {% csrf_token %}
        <div>
            <label for="id_title">Title:</label>
            <input type="text" name="title" required id="id_title">
        </div>
        
        <div>
            <label for="id_description">Description:</label>
            <input type="text" name="description" id="id_description">
        </div>
        
        <div>
            <label for="id_listItems">List items:</label>
            <textarea name="listItems" cols="40" rows="10" id="id_listItems" placeholder="separate by 'comma, space'"></textarea>
        </div>
        
        <div>
            <label for="id_ordered">Ordered:</label>
            <input type="checkbox" name="ordered" id="id_ordered">
        </div>
        
        <button type="submit" class="submit">Create List</button>
        <button type="button" class="toggle-list-modal cancel" onclick="minimizeModal()">Cancel</button>
    </form>
</section>
<section id="list-modify-modal" class="list-creation-modal minimized">
    <div class="header">
        <button class="toggle-modify-modal">
            <ion-icon name="close-circle"></ion-icon>
        </button>
        <img src="https://imgur.com/1zvy9gA.png" alt="Erica logo, depicting a pair of spectacles, and text that spells 'ERICA' in all caps.">
        <h2>Add List Items</h2>
    </div>
    <form action="{% url 'new_list_item' %}" method="post">
        {% csrf_token %}
        <input type="hidden" name="listID" id="list-id-field" value="">
        {{listitemform}}
        <button type="submit">Amend List</button>
    </form>
</section>

{% endblock body %}